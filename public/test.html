<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Magical Floating Particles Test</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body {
      height: 100%;
      background: #000;
      overflow: hidden;
      cursor: none; /* we draw our own wand cursor */
    }

    body {
      background: radial-gradient(circle at center, #001122, #000000);
    }

    /* Glowing particles */
    .particle {
      position: absolute;
      border-radius: 50%;
      pointer-events: none;
      background: #8a2be2;
      box-shadow: 0 0 20px 5px currentColor;
      animation: float 20s infinite linear;
    }
    .particle:nth-child(3n+1) { color: #8a2be2; } /* purple */
    .particle:nth-child(3n+2) { color: #00ffff; } /* cyan   */
    .particle:nth-child(3n)   { color: #ff00ff; } /* magenta*/

    @keyframes float {
      0%   { transform: translate(0, 0) rotate(0deg); }
      100% { transform: translate(0, -100vh) rotate(360deg); }
    }

    /* Fantasy wand cursor */
    #wand {
      position: fixed;
      width: 34px;
      height: 34px;
      background: radial-gradient(circle, rgba(0,255,255,0.7) 0%, transparent 70%);
      border-radius: 50%;
      pointer-events: none;
      z-index: 9999;
      transform: translate(-50%, -50%);
      box-shadow: 0 0 30px 8px #0ff;
    }
    #wand::after {
      content: '';
      position: absolute;
      top: 50%; left: 50%;
      width: 4px;
      height: 24px;
      background: linear-gradient(to bottom, #0ff, transparent);
      transform: translate(-50%, -100%) rotate(20deg);
      box-shadow: 0 0 15px #0ff;
    }

    h1 {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #0ff;
      font-family: 'Georgia', serif;
      font-size: 4rem;
      text-shadow: 0 0 20px #0ff;
      pointer-events: none;
      z-index: 10;
    }
  </style>
</head>
<body>

  <h1>Enchanted Realm</h1>
  <div id="wand"></div>

  <script>
    const particleCount = 50;
    const particles = [];

    // Create particles
    for (let i = 0; i < particleCount; i++) {
      const p = document.createElement('div');
      p.classList.add('particle');
      const size = 6 + Math.random() * 14;
      p.style.width = p.style.height = size + 'px';
      p.style.left = Math.random() * 100 + 'vw';
      p.style.top = 100 + Math.random() * 50 + 'vh'; // start below screen
      p.style.animationDuration = 15 + Math.random() * 25 + 's';
      p.style.animationDelay = Math.random() * 20 + 's';
      document.body.appendChild(p);

      particles.push({
        el: p,
        x: parseFloat(p.style.left),
        y: parseFloat(p.style.top.replace('vh','')) * window.innerHeight / 100,
        vx: (Math.random() - 0.5) * 0.4,
        vy: -0.3 - Math.random() * 0.7, // mostly upward
      });
    }

    // Wand follows mouse
    const wand = document.getElementById('wand');
    document.addEventListener('mousemove', e => {
      wand.style.left = e.clientX + 'px';
      wand.style.top  = e.clientY + 'px';
    });

    // Animation loop
    function animate() {
      particles.forEach(p => {
        const mx = (wand.offsetLeft);
        const my = (wand.offsetTop);
        const dx = (p.x * window.innerWidth / 100) - mx;
        const dy = p.y - my;
        const dist = Math.hypot(dx, dy);

        // Repel when close
        if (dist < 150) {
          const force = (150 - dist) / 150;
          p.vx += (dx / dist) * force * 2;
          p.vy += (dy / dist) * force * 2;
        }

        // Apply velocity + friction
        p.vx *= 0.97;
        p.vy *= 0.97;
        p.x += p.vx;
        p.y += p.vy;

        // Wrap around
        if (p.x < -10) p.x = 110;
        if (p.x > 110) p.x = -10;
        if (p.y < -10) p.y = window.innerHeight + 10;
        if (p.y > window.innerHeight + 10) p.y = -10;

        p.el.style.left = p.x + 'vw';
        p.el.style.top = (p.y * 100 / window.innerHeight) + 'vh';
      });

      requestAnimationFrame(animate);
    }
    animate();

    // Show default cursor on touch devices
    if ('ontouchstart' in window) {
      document.body.style.cursor = 'default';
      wand.style.display = 'none';
    }
  </script>
</body>
</html>
